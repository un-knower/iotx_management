<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">

<head>
	<meta charset="UTF-8"/>
	<title>告警数据</title>
	
	<link rel="stylesheet" type="text/css" href="/webjars/jqgrid/4.5.2/css/ui.jqgrid.css" />
	<link rel="stylesheet" type="text/css" href="/webjars/jquery-ui/1.12.1/themes/base/jquery-ui.css" />
	<link rel="stylesheet" type="text/css" href="/webResources/plugins/pageJquery/css/zxf_page.css"/>
</head>

<body>
	<div><table id="alarmDataTable"></table></div>
	<div id="alarmPager"></div>
</body>

<script type="text/javascript" src="/webjars/jquery/3.2.1/dist/jquery.js"></script>
<script type="text/javascript" src="/webjars/jquery-ui/1.12.1/jquery-ui.js"></script>
<script type="text/javascript" src="/webjars/jqgrid/4.5.2/js/jquery.jqGrid.js"></script>
<script type="text/javascript" src="/webjars/jqgrid/4.5.2/js/i18n/grid.locale-cn.js"></script>
<script type="text/javascript" src="/webResources/plugins/pageJquery/js/zxf_page.js" ></script>


<script type="text/javascript">
	$(document).ready(function() {
		$.extend(jQuery.jgrid.defaults, {
		    prmNames: {
		        id: "_rowid", page: "_page", rows: "_rows",
		        oper: "_oper", sort: "_sidx", order: "_sord"
		    }
		});
		
		
		 var colNames=['传感器序列号','传感器类型','数值'];
		 var colModel=[
						{name:'uniqueId',index:'uniqueId', width: '120', sortable:false, align: 'center'},
						{name:'param', index:'param', width:'120', sortable: false,align: 'center'},
						{name:'val', index:'val', width:'120', sortable: false,align: 'center'},
		    	   	  ]
		 
		 //每页显示多少行
		 var rowNum=20;
		 var page=0;
		 var url='/iotxData/alarmData/abc123/cpu';
		 var sort;
		 
		 //请求参数
		 var params={}
		 //设置请求需要的一些参数
		 params['rowId']='id'
		 params['attributes']='uniqueId,param,val';//要获取的属性名
		 params['page']=page;
		 params['size']=rowNum;
		 params['sort']=sort;
		 
		 var myGrid = jQuery("#alarmDataTable");
		 var myPager = jQuery("#alarmPager");
		 
		 myGrid.jqGrid({
	    		datatype: "json",
	    		url:url,
	    		postData:params,
	    		height: '100%',
	    		colNames:colNames,
	    	   	colModel:colModel,
	    	   	multiselect: true,
	    	   	multiboxonly: true,
	    	   	multiselectWidth: 30,
	    	   	rowNum: rowNum,
	    	   	autowidth: true,
	    	   	forceFit: false,
	    	   	altRows: false,
	    	   	viewrecords: true,
	    	   	
	    	   	gridComplete:function(){
	    	   	 	var lastPage = myGrid.getGridParam('lastpage'); // current page
	    	   		
	    	   		//加载页码
	    	   		myPager.createPage({
	    	   			//初始化参数
	    				pageNum: lastPage,//总页码
	    				current: page+1,//当前页
	    				shownum: 11,//显示多少页
	    				//回调方法
	    				backfun: function(e) {
	    					page=e.current-1;//点中的页码
	    					//刷新表格
	    					myGrid.jqGrid('setGridParam', {
	    				        url : url,
	    				        postData:params
	    				    }).trigger("reloadGrid");
	    				}
	    			});
	    	   		
		    	}
	    		
	    	});
	});
</script>

</html>